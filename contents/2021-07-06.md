---
title: 'TypeScriptã‚’å‹•ã‹ã™æ–¹æ³•'
date: '2021-07-06'
tags: ['Node.js', 'performance', 'Lighthouse']
---

## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

Dependabot ã®è¨­å®šã‚’ã—ã¦ä½œã‚‰ã‚ŒãŸãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å…¨ã¦ãƒãƒ¼ã‚¸ã—ãŸã®ã«ã‚‚é–¢ã‚ã‚‰ãš GitHub ã® Security Alerts ãŒã¾ã æ€’ã£ã¦ã„ã¦ã€ã‚ã‚Œï¼Ÿã¨æ€ã£ã¦èª¿ã¹ã¦ã¿ãŸã‘ã©ã‚ã‚“ã¾ã‚Šã‚ˆãåˆ†ã‹ã‚‰ãªã‹ã£ãŸã€‚

æ€’ã‚‰ã‚Œã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ yarn.lock ã§è¦‹ãŸã‚‰ãŸã—ã‹ã«å­˜åœ¨ã—ã¦ã„ãŸã®ã§ãã‚Œã‚’è§£æ¶ˆã—ã€ã¤ã„ã§ã«è‰²ã€…ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸€æ°—ã«ä¸Šã’ã¡ã‚ƒã†ã‹ã¨æ€ã£ã¦`yarn upgrade-interactive`ã—ãŸã€‚

`yarn upgrade-interactive` ã—ã¦ a ã§å…¨éƒ¨é¸æŠã—ãŸã‚‰ãªã‚“ã‹ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã€‚

```sh
tagucch@tagucch random.tagucch.dev % yarn upgrade-interactive
yarn upgrade-interactive v1.22.10
info Color legend :
 "<red>"    : Major Update backward-incompatible updates
 "<yellow>" : Minor Update backward-compatible features
 "<green>"  : Patch Update backward-compatible bug fixes
? Choose which packages to update.
? Choose which packages to update. @types/node@14.17.4, @types/react@17.0.13, @types/react-dom@17.0.8, autoprefixer@10.2.6, postcss@8.3.5, prettier@2.3.2, tailwindcss@2.2.4, typescript@4.3.5,
date-fns@2.22.1, gray-matter@4.0.3, next@10.2.3, react@17.0.2, react-dom@17.0.2
info Installing "dependencies"...
[1/4] ğŸ”  Resolving packages...
warning next > native-url > querystring@0.2.1: The
warning next > node-libs-browser > url > querystring@0.2.0: The
[2/4] ğŸšš  Fetching packages...
error jest-worker@27.0.0-next.5: The engine "node" is incompatible with this module. Expected version "^10.13.0 || ^12.13.0 || ^14.15.0 || >=15.0.0". Got "14.7.0"
âœ¨  Done in 25.63s.
Error: Found incompatible module.
    at MessageError.ExtendableBuiltin (/usr/local/Cellar/yarn/1.22.10/libexec/lib/cli.js:721:66)
    at new MessageError (/usr/local/Cellar/yarn/1.22.10/libexec/lib/cli.js:750:123)
    at checkOne (/usr/local/Cellar/yarn/1.22.10/libexec/lib/cli.js:48059:11)
    at Object.check (/usr/local/Cellar/yarn/1.22.10/libexec/lib/cli.js:48078:5)
    at /usr/local/Cellar/yarn/1.22.10/libexec/lib/cli.js:7348:73
    at Generator.next (<anonymous>)
    at step (/usr/local/Cellar/yarn/1.22.10/libexec/lib/cli.js:310:30)
    at /usr/local/Cellar/yarn/1.22.10/libexec/lib/cli.js:321:13
tagucch@tagucch random.tagucch.dev %
```

ä»Šã® Node.js ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ 14.7.0 ã ã£ãŸã®ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¾“ã„ nodenv ã§ 14.15.0 ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦è¨­å®šã—ãŸã€‚ã ã„ã¶å‰ã« anyenv ã‚’ homebrew çµŒç”±ã§å…¥ã‚Œç›´ã—ãŸã®ã§`brew upgrade anyenv`ã ã‘ã§ nodenv ã® list ãŒæ›´æ–°ã•ã‚Œã¦æ¥½ã ã£ãŸã€‚

Node.js ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ›´æ–°ã—ã¦ã‹ã‚‰ã‚‚ã†ä¸€åº¦`yarn upgrade-interactive`ã—ãŸã‚‰ç‰¹ã«å•é¡Œãªãçµ‚äº†ã—ãŸã€‚`jest-worker`ã§æ±‚ã‚ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒæ€’ã‚‰ã‚Œã¦ãŸã‘ã©ã€ãƒ†ã‚¹ãƒˆä½•ã‚‚æ›¸ã„ã¦ãªã„ã‚“ã ã‚ˆãªâ€¦â€¦ã€‚ã“ã®ã‚µã‚¤ãƒˆã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚‚æ›¸ã„ã¦ã„ããŸã„ã€‚

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ã“ã¨ã‚’å­¦ã³ãŸã„

ä»•äº‹ã§ IE ã ã‘é€Ÿåº¦ãŒé…ãã¦å•é¡Œã«ãªã£ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ãŒã‚ã£ã¦ã€ãã‚Œã‚’ãªã‚“ã¨ã‹ã—ãŸãã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ã¤ã„ã¦è‰²ã€…èª¿ã¹ã‚ˆã†ã¿ãŸã„ãªè©±ã«ãªã£ã¦ã„ã‚‹ã€‚

ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«é–¢ã—ã¦æ„è­˜çš„ã«ä½•ã‹ã‚’æ”¹å–„ã—ã‚ˆã†ã¨ã„ã†æ©Ÿä¼šè‡ªä½“ãŒã»ã¼åˆã‚ã¦ã§å›°ã£ã¦ã—ã¾ã„ã€ã¨ã«ã‹ãã¾ãšã¯ã§ãã‚‹ã“ã¨ã‹ã‚‰ã‚„ã‚‹ã‹ã¨æ€ã£ã¦ Lighthouse ã§è¨ˆæ¸¬ã—ã¦ã¿ãŸã‘ã©ã€è¨ˆæ¸¬çµæœã®é …ç›®ã¨ã‹ãŒå…¨ç„¶åˆ†ã‹ã‚‰ãªã„ã“ã¨ã ã‚‰ã‘ã§ãƒ’ã‚¨ãƒ¼ã¨ãªã£ã¦ã„ã‚‹ã€‚

[Lighthouse ã®è¨ˆæ¸¬çµæœã‚’è¦‹ã¦ã„ã \- Qiita](https://qiita.com/nightyknite/items/22d9f818dbab9bf171a3)

ã²ã¨ã¾ãšã“ã‚Œã‚’èª­ã‚“ã§ã„ã‚‹ãŒã€é …ç›®ãŒã‚ã£ã¡ã‚ƒå¤šã„ã€‚å…ˆã¯é•·ãã†ã ã€‚
